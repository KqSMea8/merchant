webpackJsonp([17],{1032:function(t,a,e){"use strict";(function(t){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var r=e(229),o=s(r),i=e(116),n=s(i),u=e(100),d=s(u);a.default={name:"order-list",data:function(){var t=this,a=function(a,e,s){1==e||2==e?2==e?""!=!!t.updateStatusForm.express_number?s():s(new Error("已发货状态必须填写快递单号！")):s():s(new Error("请选择发货状态"))};return{autowidthtable:"autowidthtable",payStatus:["不限","待支付","已支付"],shipStatus:["不限","待发货","已发货"],columns:[{title:"订单编号",className:"order-col-1",width:"10%",key:"order_no"},{title:"商品名称",key:"product_name",className:"order-col-2",width:"9%",render:function(t,a){var e=a.row.product_name;return 0==a.row.product_pay_type&&(e="线下购买"),t("span",{},e)}},{title:"用户名",className:"order-col-3",width:"9%",align:"center",key:"member_name"},{title:"时间",align:"center",sortable:!0,className:"order-col-4",key:"date_added"},{title:"返现(元)",sortable:!0,className:"order-col-5",width:"9%",align:"right",key:"cash",render:function(t,a){return t("span",{},n.default.fmoney(n.default.numberCarry(a.row.cash,100,6),6))}},{title:"返积分",sortable:!0,className:"order-col-6",width:"9%",align:"right",key:"score"},{title:"积分金额",sortable:!0,className:"order-col-7",width:"9%",align:"right",key:"total_score"},{title:"状态",sortable:!0,key:"status",className:"order-col-8",width:"9%",align:"center",render:function(t,a){var e="default",s="已拆红包";return 1==a.row.status&&(e="red",s="待支付"),2==a.row.status&&(e="green",s="已支付"),t("Tag",{props:{color:e,size:"small"}},s)}},{title:"快递单号",key:"express_number",align:"center",className:"order-col-9",width:"9%",render:function(t,a){var e="------";return a.row.express_number&&(e=a.row.express_number),t("span",{style:{color:"#999999"}},e)}},{title:"发货状态",key:"ship_status",className:"order-col-10",width:"9%",align:"center",render:function(t,a){var e="default";if(2==a.row.status){var s="未处理";return 2==a.row.ship_status&&(e="green",s="已发货"),1==a.row.ship_status&&(e="red",s="待发货"),t("Tag",{props:{color:e,size:"small"}},s)}return t("span",{},"--")}},{title:"操作",key:"id",className:"order-col-11",width:"9%",align:"center",render:function(a,e){var s=a("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.showEdit(e.index)}}},"发货处理"),r=[];return 2==e.row.status&&r.push(s),a("div",r)}}],saveType:"new",tableData:[],page:{dataCount:0,pageCount:0,pageSize:10,pageNumber:1,pageSizeOpts:[10,20,50,100]},getLoading:!1,currentData:{id:0,order_no:"",merchant_id:0,member_name:"",total_score:1,status:1,date_added:"",cash:0,score:0},searchData:{keyword:"",searchDate:[],startDate:"",endDate:"",payStatus:"",shipStatus:""},searchValidata:{},updateStatusForm:{},updateStatusValidate:{ship_status:[{required:!0,validator:a,trigger:"blur"}]},updateStatus:!1,saveUpdateStatusLoading:!1}},methods:{showEdit:function(a){this.updateStatusForm=t.extend(!0,{},this.tableData[a]),this.updateStatusForm.dataIndex=a,this.saveType="edit",this.updateStatus=!0},cancelEdit:function(){this.updateStatusForm={},this.updateStatus=!1},saveUpdateStatus:function(){var a=this;this.$refs.updateStatusForm.validate(function(e){if(e){a.saveUpdateStatusLoading=!0;var s={ssid:d.default.get("ssid"),id:a.updateStatusForm.id,ship_status:a.updateStatusForm.ship_status,express_number:a.updateStatusForm.express_number};t.ajax({url:o.default.api.shop.order.fahuo,type:"POST",dataType:"json",data:s}).done(function(e){if(a.saveUpdateStatusLoading=!1,e)if(0==e.code){a.$Message.success("操作成功！");var s=t.extend(!0,[],a.tableData);s[a.updateStatusForm.dataIndex]=a.updateStatusForm,a.updateStatusForm={},a.tableData=s,a.updateStatus=!1}else o.default.showError({vm:a,data:e,errorMsg:""});else o.default.showError({vm:a,data:e,errorMsg:"请求失败"})}).fail(function(t,e,s){a.saveUpdateStatusLoading=!1,o.default.showError({vm:a,errorMsg:"服务器通讯失败"})})}})},changePage:function(t){this.page.pageNumber=t,this.search(t)},changePageSize:function(t){this.page.pageSize=t,this.page.pageCount=Math.ceil(this.page.dataCount/this.page.pageSize),this.search()},search:function(t){this.searchData.searchDate.length&&(this.searchData.startDate=n.default.FormatDate(this.searchData.searchDate[0],"yyyy-MM-dd"),this.searchData.endDate=n.default.FormatDate(this.searchData.searchDate[1],"yyyy-MM-dd")),this.page.pageNumber=1,console.log(t),t&&(this.page.pageNumber=t),this.init()},init:function(){var a=this;this.getLoading=!0;var e={ssid:d.default.get("ssid"),page:this.page.pageNumber,pageSize:this.page.pageSize};""!=this.searchData.keyword&&(e.search=this.searchData.keyword),this.searchData.payStatus>0&&(e.status=this.searchData.payStatus),this.searchData.shipStatus>0&&(e.ship_status=this.searchData.shipStatus),""!=this.searchData.startDate&&(e.startDate=this.searchData.startDate),""!=this.searchData.endDate&&(e.endDate=this.searchData.endDate),t.ajax({url:o.default.api.shop.order.getList,type:"POST",dataType:"json",data:e}).done(function(t){a.getLoading=!1,t?0==t.code?(a.page.dataCount=t.data.count,a.page.pageCount=Math.ceil(a.page.dataCount/a.page.pageSize),a.tableData=t.data.list):o.default.showError({vm:a,data:t,errorMsg:""}):o.default.showError({vm:a,data:t,errorMsg:"请求失败"})}).fail(function(t,e,s){a.getLoading=!1,o.default.showError({vm:a,data:data,errorMsg:"服务器通讯失败"})})}},mounted:function(){},activated:function(){this.init()}}}).call(a,e(230))},1050:function(t,a){},1090:function(t,a,e){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Card",[e("p",{attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"person"}}),t._v("\n            订单列表\n        ")],1),t._v(" "),e("div",{staticClass:"ordler-list"},[e("div",{staticClass:"search-box"},[e("Form",{ref:"searchData",attrs:{model:t.searchData,rules:t.searchValidata,inline:""}},[e("FormItem",{attrs:{prop:"keyword"}},[e("Input",{attrs:{type:"text",placeholder:"搜索订单号或者用户名"},model:{value:t.searchData.keyword,callback:function(a){t.$set(t.searchData,"keyword",a)},expression:"searchData.keyword"}},[e("Icon",{attrs:{slot:"prepend",type:"ios-eye"},slot:"prepend"})],1)],1),t._v(" "),e("FormItem",{attrs:{prop:"searchDate"}},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"请选择时间范围"},model:{value:t.searchData.searchDate,callback:function(a){t.$set(t.searchData,"searchDate",a)},expression:"searchData.searchDate"}})],1),t._v(" "),e("Select",{staticStyle:{width:"140px"},attrs:{placeholder:"选择支付状态"},model:{value:t.searchData.payStatus,callback:function(a){t.$set(t.searchData,"payStatus",a)},expression:"searchData.payStatus"}},t._l(t.payStatus,function(a,s){return e("Option",{key:s,attrs:{value:s}},[t._v(t._s(a))])})),t._v(" "),e("Select",{staticStyle:{width:"140px"},attrs:{placeholder:"选择发货状态"},model:{value:t.searchData.shipStatus,callback:function(a){t.$set(t.searchData,"shipStatus",a)},expression:"searchData.shipStatus"}},t._l(t.shipStatus,function(a,s){return e("Option",{key:s,attrs:{value:s}},[t._v(t._s(a))])})),t._v(" "),e("FormItem",[e("Button",{attrs:{type:"primary",icon:"search"},on:{click:function(a){t.search()}}},[t._v("搜索")])],1)],1)],1),t._v(" "),e("Table",{staticClass:"auto-width-table",attrs:{border:"",columns:t.columns,loading:t.getLoading,data:t.tableData}}),t._v(" "),e("div",{staticClass:"page-box"},[t.page.pageCount>1?e("Page",{attrs:{total:t.page.dataCount,current:t.page.pageNumber,"show-total":"","page-size-opts":t.page.pageSizeOpts,"page-size":t.page.pageSize,"show-elevator":"",placement:"top","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}):t._e()],1)],1),t._v(" "),e("Modal",{attrs:{width:500},model:{value:t.updateStatus,callback:function(a){t.updateStatus=a},expression:"updateStatus"}},[e("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("订单处理")]),t._v(" "),e("Form",{ref:"updateStatusForm",attrs:{model:t.updateStatusForm,"label-width":100,"label-position":"right",rules:t.updateStatusValidate}},[e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"订单编号："}},[t._v("\n                    "+t._s(t.updateStatusForm.order_no)+"\n                ")]),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"商品名称："}},[0==t.updateStatusForm.product_pay_type?[t._v("\n                        线下购买\n                    ")]:[t._v("\n                        "+t._s(t.updateStatusForm.product_name)+"\n                    ")]],2),t._v(" "),e("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"用 户 名："}},[t._v("\n                    "+t._s(t.updateStatusForm.member_name)+"\n                ")]),t._v(" "),e("FormItem",{attrs:{label:"提交时间："}},[t._v("\n                    "+t._s(t.updateStatusForm.date_added)+"\n                ")]),t._v(" "),e("FormItem",{attrs:{label:"快递单号：",prop:"express_number"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:t.updateStatusForm.express_number,callback:function(a){t.$set(t.updateStatusForm,"express_number",a)},expression:"updateStatusForm.express_number"}})],1),t._v(" "),e("FormItem",{attrs:{label:"发货状态：",prop:"ship_status"}},[e("RadioGroup",{model:{value:t.updateStatusForm.ship_status,callback:function(a){t.$set(t.updateStatusForm,"ship_status",a)},expression:"updateStatusForm.ship_status"}},[e("Radio",{attrs:{label:"1"}},[e("span",[t._v("待发货")])]),t._v(" "),e("Radio",{attrs:{label:"2"}},[e("span",[t._v("已发货")])])],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text"},on:{click:t.cancelEdit}},[t._v("取消")]),t._v(" "),e("Button",{attrs:{type:"primary",loading:t.saveUpdateStatusLoading},on:{click:t.saveUpdateStatus}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},983:function(t,a,e){e(1050);var s=e(65)(e(1032),e(1090),null,null);s.options.__file="E:\\BigCousin\\document\\预购宝\\merchant\\src\\views\\order\\order-list.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] order-list.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports}});